<div class="container mt-4 animate-fade-in" style="max-width: 600px;">
  <div class="card border-0 shadow">
    <div class="card-header bg-morado text-white py-3">
      <h4 class="mb-0 fw-bold">
        <i class="bi" [ngClass]="mode === 'new' ? 'bi-plus-circle' : 'bi-pencil-square'"></i>
        {{ mode === 'new' ? 'Nueva Categoría' : 'Editar Categoría' }}
      </h4>
    </div>
    
    <div class="card-body p-4">
      <form [formGroup]="form" (ngSubmit)="save()">
        
        <div class="mb-3">
          <label class="form-label fw-bold">Nombre de la Categoría <span class="text-danger">*</span></label>
          <input type="text" class="form-control" formControlName="nombre" 
                 placeholder="Ej: Decoración, Catering..."
                 [class.is-invalid]="form.get('nombre')?.invalid && form.get('nombre')?.touched">
          
          <div *ngIf="form.get('nombre')?.invalid && form.get('nombre')?.touched" class="invalid-feedback">
            El nombre es obligatorio (máx. 50 caracteres).
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label fw-bold">Descripción <span class="text-danger">*</span></label>
          <textarea class="form-control" rows="3" formControlName="descripcion"
                    placeholder="Describe de qué trata esta categoría..."
                    [class.is-invalid]="form.get('descripcion')?.invalid && form.get('descripcion')?.touched"></textarea>
          
          <div *ngIf="form.get('descripcion')?.invalid && form.get('descripcion')?.touched" class="invalid-feedback">
            Debes ingresar una breve descripción.
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label fw-bold">Icono (Bootstrap Icons)</label>
          <div class="input-group">
            <span class="input-group-text bg-light"><i class="bi" [ngClass]="form.get('icon')?.value || 'bi-tag'"></i></span>
            <input type="text" class="form-control" formControlName="icon" placeholder="bi-star-fill">
          </div>
          <small class="text-muted">Ingresa el nombre de la clase de Bootstrap Icons.</small>
        </div>

        <div class="form-check form-switch mb-4">
          <input class="form-check-input" type="checkbox" formControlName="activo" id="activeCheck">
          <label class="form-check-label fw-bold" for="activeCheck">Categoría Activa</label>
        </div>

        <div class="d-flex justify-content-between border-top pt-3">
          <a routerLink="/categories" class="btn btn-outline-secondary rounded-pill px-4">
            Cancelar
          </a>

          <div class="d-flex gap-2">
            <button *ngIf="mode === 'edit'" type="button" class="btn btn-danger rounded-pill px-4" (click)="delete()">
              <i class="bi bi-trash"></i> Eliminar
            </button>

            <button type="submit" class="btn btn-primary rounded-pill px-4">
              <i class="bi bi-save me-1"></i> Guardar
            </button>
          </div>
        </div>

      </form>
    </div>
  </div>
</div>

<app-notification></app-notification>